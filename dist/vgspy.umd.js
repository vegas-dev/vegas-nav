// @vegas-dev/apps/VGSpy v3.0.3
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).window=t.window||{})}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var o=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.isInit=!1,this.isClick=!1,n&&("string"==typeof n&&(n=document.querySelector(n)),n instanceof HTMLElement&&(this.settings={offset:n.dataset.offset?parseInt(n.dataset.offset):parseInt(i.offset)||0,isState:n.dataset.state?n.dataset.state:i.state||!1,onActive:i.onActive||null,onClick:i.onClick||null,activeClass:i.activeClass?i.activeClass.trim().split(" "):["active"]},this.links=n.querySelectorAll("[data-target]").length?n.querySelectorAll("[data-target]"):n.querySelectorAll("a"),this.isInit=!0,this.onLoad(),this.onClick(),this.onScroll()))}var s,r,o;return s=t,r=[{key:"onLoad",value:function(){if(this.isInit){var t=this;window.onload=function(){t.setCurrentSection(null)}}}},{key:"onClick",value:function(){var t=this;if(this.isInit)for(var e=this,n=function(n){t.links[n].onclick=function(){return"function"==typeof e.settings.onClick&&e.settings.onClick(this.links[n]),e.setCurrentSection(this),!1}},i=0;i<this.links.length;i++)n(i)}},{key:"onScroll",value:function(){if(this.isInit){var t=this;t.isClick||(window.onscroll=function(){t.setCurrentSection(null)})}}},{key:"setCurrentSection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.settings.isState,t){var e=this.attributes(t,"target"),n=this.attributes(t,"offset"),i=document.getElementById(e);if(i){var s=i.offsetTop+n+this.settings.offset;this.removeCurrentActive(),this.setActive(t,i),window.scrollTo(0,s),this.isClick=!1}}else for(var r=0;r<this.links.length;r++){var o=this.attributes(this.links[r],"target"),a=this.attributes(this.links[r],"offset"),l=document.getElementById(o);if(l){var f=l.offsetTop+a+this.settings.offset,c=f+l.offsetHeight,u=document.documentElement.scrollTop||document.body.scrollTop,h=u>=f&&u<c;h&&(this.removeCurrentActive({ignore:this.links[r]}),this.setActive(this.links[r],l))}}}},{key:"setActive",value:function(t,e){if(this.isInit){var n,s,r=this.settings.activeClass.every((function(e){return t.classList.contains(e)}));if(this.settings.isState){var o=this.attributes(t,"text"),a=this.attributes(t,"target");history.pushState("",document.title+o,"#"+a)}if(!r)e&&(n=e.classList).add.apply(n,i(this.settings.activeClass)),t&&(s=t.classList).add.apply(s,i(this.settings.activeClass)),"function"==typeof this.settings.onActive&&this.settings.onActive(t,e)}}},{key:"removeCurrentActive",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignore:null},e=0;e<this.links.length;e++){var n,s,r=this.attributes(this.links[e],"target"),o=document.getElementById(r);t.ignore!==this.links[e]&&((n=this.links[e].classList).remove.apply(n,i(this.settings.activeClass)),(s=o.classList).remove.apply(s,i(this.settings.activeClass)))}}},{key:"attributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.getAttribute("href")||t.dataset.target;"undefined"!==n&&-1!==n.indexOf("#")?-1!==(n=n.replace(/(^.+)#/gm,"")).indexOf("#")&&(n=n.replace("#","")):"undefined"!==n&&-1===n.indexOf("#")&&(n="");var i=t.dataset.offset?parseInt(t.dataset.offset):0,s=t.innerHTML;return"target"===e?n:"offset"===e?i:"text"===e?s:{target:n,offset:i,text:s}}}],r&&n(s.prototype,r),o&&n(s,o),Object.defineProperty(s,"prototype",{writable:!1}),t}(),a=document.querySelectorAll("[data-vgspy]");if(a.length){var l,f=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(a);try{for(f.s();!(l=f.n()).done;){new o(l.value)}}catch(t){f.e(t)}finally{f.f()}}t.VGSpy=o}));
