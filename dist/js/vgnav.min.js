"use strict";class VGNav{constructor(a){this.settings=Object.assign({expand:"lg",layout:"sidebar",isHover:!1,toggle:"<span class=\"default\"></span>",sidebar:{placement:"right",clone:null}},a),this.breakpoints={max:{xl:1921,lg:1200,md:992,sm:768,xs:480},min:{xl:1200,lg:992,md:768,sm:480,xs:0}},this.container=".vg-nav",this.classes={container:"vg-nav-main-container",hamburger:"vg-nav-hamburger",sidebar:"vg-nav-sidebar",collapse:"vg-nav-collapse",overlay:"vg-nav-overlay",cloned:"vg-nav-cloned",hover:"vg-nav-hover",XL:"vg-nav-xl",LG:"vg-nav-lg",MD:"vg-nav-md",SM:"vg-nav-sm",XS:"vg-nav-xs"},this.current_responsive_size="",this.isInit=!1,this.isInit||this.init()}init(){var a=this,b=document.querySelector(a.container),c=document.querySelector("."+a.classes.container);if(!b||!c)return!1;// Определим в основной контайнер конфигурационные классы
b.classList.add("vg-nav-"+a.settings.expand),a.settings.isHover&&b.classList.add(a.classes.hover);// Устанавливаем указатель переключателя
var d=b.querySelectorAll(".dropdown-mega > a, .dropdown > a"),e="<span class=\"toggle\">"+a.settings.toggle+"</span>";d.forEach(function(a){a.insertAdjacentHTML("beforeend",e)});// Устанавливаем гамбургер
var f=b.classList.contains(a.classes.XL)||b.classList.contains(a.classes.LG)||b.classList.contains(a.classes.MD)||b.classList.contains(a.classes.SM)||b.classList.contains(a.classes.XS);// Слои мобильной навигации
if(f&&b.insertAdjacentHTML("afterbegin","<a href=\"#\" class=\""+a.classes.hamburger+"\"><span></span><span></span><span></span></a>"),"sidebar"===this.settings.layout){var g,h=document.getElementsByClassName(a.classes.sidebar),i=a.settings.sidebar||!1,j=i.placement||"right",k=document.getElementsByClassName(a.classes.collapse);if(k.length&&k[0].remove(),f){if(!h.length){document.body.insertAdjacentHTML("beforeend","<div class=\""+a.classes.sidebar+" "+j+"\"><div class=\""+a.classes.sidebar+"__close\" data-dismiss=\""+a.classes.sidebar+"\">&times;</div><div class=\""+a.classes.sidebar+"__content\"></div></div>");var l=document.getElementsByClassName(a.classes.sidebar+"__content");a.cloneNavigation(l,b.querySelector("."+a.classes.container))}else if(g=h[0].cloneNode(!0),document.body.appendChild(g),h[1].classList.add(j),h[0].remove(),"clone"in i&&i.clone){var m=document.querySelector("."+a.classes.sidebar).querySelectorAll(i.clone);m&&a.cloneNavigation(m,b.querySelector("."+a.classes.container))}document.body.insertAdjacentHTML("beforeend","<div class=\""+a.classes.overlay+" "+j+"\"></div>")}}else if("collapse"===a.settings.layout){var n=document.getElementsByClassName(a.classes.collapse);a.cloneNavigation(n,b.querySelector("."+a.classes.container))}this.isInit=!0}toggle(a){function b(a,b,c){a&&"beforeClick"in a&&"function"==typeof a.beforeClick&&a.beforeClick(b,c)}function c(a,b,c){a&&"afterClick"in a&&"function"==typeof a.afterClick&&a.afterClick(b,c)}function d(){var a=document.getElementsByClassName(f.classes.hamburger);if(a.length&&a[0].classList.remove("show"),"sidebar"===f.settings.layout){var b=document.getElementsByClassName(f.classes.sidebar),c=document.getElementsByClassName(f.classes.overlay);b&&c&&(b[0].classList.remove("show"),c[0].classList.remove("show")),document.body.classList.contains("vg-nav-sidebar-open")&&(document.body.classList.remove("vg-nav-sidebar-open"),document.body.style.paddingRight=0),f.dispose(h),f.dispose(h,"dropdown-mega")}else"collapse"===f.settings.layout&&document.getElementsByClassName(f.classes.collapse)[0].classList.remove("show");return!1}if(!this.isInit)return!1;var f=this,g=document.querySelector(f.container),h=document.querySelectorAll("."+f.classes.container),i=document.querySelectorAll("."+f.classes.container+" li > a"),j=g.querySelector("."+f.classes.hamburger),k=document.querySelector("."+f.classes.overlay),l=document.querySelector("[data-dismiss=vg-nav-sidebar]");// Функция обратного вызова после инициализации скрипта
// Закрываем меню, если кликнули по экрану
// Открываем, закрываем боковую панель или выпадающий список
a&&"afterInit"in a&&"function"==typeof a.afterInit&&a.afterInit(f),i.forEach(function(d){d.onclick=function(d){if(!f.clickable()){var e=this,g=e.closest("li");// Открываем обычное меню
if(b(a,f,d),g.classList.contains("dropdown")){if(f.dispose(h,"dropdown-mega"),g.closest("ul").classList.contains(f.classes.container))return g.classList.contains("show")?g.classList.remove("show"):(f.dispose(h),g.classList.add("show")),c(a,f,d),!1;if(g.classList.contains("show"))return e.closest("li").classList.remove("show"),f.dispose(g),c(a,f,d),!1;for(var j,k=g.children,l=1;l<=k.length;l++)"UL"===k[l-1].tagName&&(j=k[l-1]);if(0<k.length)return e.closest("li").classList.add("show"),c(a,f,d),!1}// Открываем мега меню
return g.classList.contains("dropdown-mega")?(g.classList.contains("show")?g.classList.remove("show"):(f.dispose(h),g.classList.add("show")),c(a,f,d),!1):void c(a,f,d)}}}),window.addEventListener("mouseup",a=>{a.target.closest("."+f.classes.container)||(f.dispose(h),f.dispose(h,"dropdown-mega"))}),j.onclick=function(){var a=this;if(a.classList.toggle("show"),"sidebar"!==f.settings.layout)"collapse"===f.settings.layout&&document.getElementsByClassName(f.classes.collapse)[0].classList.toggle("show");else if(document.getElementsByClassName(f.classes.sidebar)[0].classList.toggle("show"),document.getElementsByClassName(f.classes.overlay)[0].classList.toggle("show"),!document.body.classList.contains("vg-nav-sidebar-open")){var b=window.innerWidth-document.documentElement.clientWidth;document.body.classList.add("vg-nav-sidebar-open"),document.body.style.paddingRight=b+"px"}else document.body.classList.remove("vg-nav-sidebar-open"),document.body.style.paddingRight=0;return!1},k&&(k.onclick=()=>(d(),!1)),l&&(l.onclick=()=>(d(),!1))}dispose(a){function b(a){if(a)for(var b=1;b<=a.length;b++)a[b-1].classList.contains("show")&&a[b-1].classList.remove("show")}for(var c,d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"dropdown",e=1;e<=a.length;e++)c=a[e-1].getElementsByClassName(d),b(c)}cloneNavigation(a,b){var c=b.cloneNode(!0);c.classList.add(this.classes.cloned),a[0].appendChild(c)}clickable(){var a=document.querySelector(this.container);return!!a.classList.contains(this.classes.hover)&&this.checkResponsiveClass()}checkResponsiveClass(){var a=document.querySelector(this.container);return this.current_responsive_size=a.classList.contains(this.classes.XL)?this.breakpoints.max.xl:a.classList.contains(this.classes.LG)?this.breakpoints.max.lg:a.classList.contains(this.classes.MD)?this.breakpoints.max.md:a.classList.contains(this.classes.SM)?this.breakpoints.max.sm:a.classList.contains(this.classes.XS)?this.breakpoints.max.xs:this.breakpoints.max.xs,window.innerWidth>=this.current_responsive_size}}
