"use strict";class VGNav{constructor(a,b){this.settings=$.extend({expand:"lg",layout:"sidebar",hover:!1,toggle:"<span class=\"default\"></span>",sidebar:{placement:"right",width:250}},b),this.breakpoints={max:{xl:1921,lg:1200,md:992,sm:768,xs:480},min:{xl:1200,lg:992,md:768,sm:480,xs:0}},this.container=a,this.classes={container:"vg-nav-main-container",hamburger:"vg-nav-hamburger",sidebar:"vg-nav-sidebar",collapse:"vg-nav-collapse",overlay:"vg-nav-overlay",cloned:"vg-nav-cloned",hover:"vg-nav-hover",XL:"vg-nav-xl",LG:"vg-nav-lg",MD:"vg-nav-md",SM:"vg-nav-sm",XS:"vg-nav-xs"},this.current_responsive_size="",this.init()}init(){var a=this,b=$("body"),c=$(window),d=window.innerWidth,e=$(a.container);// Определим основной контайнер
e.addClass("vg-nav-"+a.settings.expand).children("ul").addClass(a.classes.container),a.settings.hover&&e.addClass(a.classes.hover);// Устанавливаем указатель переключателя
var f=e.find(".dropdown-mega > a, .dropdown > a"),g="<span class=\"toggle\">"+a.settings.toggle+"</span>";f.each(function(){var a=$(this).text();$(this).html(a+g)});// Устанавливаем гамбургер
var h=e.hasClass(a.classes.XL)||e.hasClass(a.classes.LG)||e.hasClass(a.classes.MD)||e.hasClass(a.classes.SM)||e.hasClass(a.classes.XS);h&&e.prepend("<a href=\"#\" class=\""+a.classes.hamburger+"\"><span></span><span></span><span></span></a>");// Установим основной контайнер для мобильного меню
var i=e.children("ul");if("sidebar"===this.settings.layout){var j,k=b.find("."+a.classes.sidebar),l=a.settings.sidebar||!1,m="right";if(b.find("."+a.classes.collapse).remove(),l){var n=l.width||!1;m=l.placement||m,n&&(a.setWidthToSidebar(d,n),c.on("resize",function(){a.setWidthToSidebar($(this).width(),n)}))}h&&(k.length?(j=k.detach(),b.append(j),k.addClass(m)):(b.append("<div class=\""+a.classes.sidebar+" "+m+"\"><div class=\""+a.classes.sidebar+"__close\" data-dismiss=\""+a.classes.sidebar+"\">&times;</div><div class=\""+a.classes.sidebar+"__content\"></div></div>"),a.cloneNavigation(b.find("."+a.classes.sidebar+"__content"),i)),b.append("<div class=\""+a.classes.overlay+" "+m+"\"></div>"))}else"collapse"===a.settings.layout&&a.cloneNavigation(b.find("."+a.classes.collapse),i)}toggle(a){var b=this,c=$("body"),d=$(b.container).find("li.dropdown a"),e=$(b.container).find("li.dropdown-mega a"),f=$(b.container).find("li a"),g=$(b.container).find("."+b.classes.hamburger),h=$(b.container).children("ul");a&&"beforeClick"in a&&"function"==typeof a.beforeClick&&a.beforeClick(b),d.on("click",function(){if(!b.clickable()){var a=$(this),c=a.parent("li");if($(".dropdown-mega").removeClass("show"),c.parent("ul").hasClass(b.classes.container)){var d=h.find(".show");return d.hasClass("current")&&d.removeClass("show"),c.hasClass("current")?c.removeClass("show").removeClass("current"):(c.addClass("show").addClass("current"),d.removeClass("current")),!1}if(c.hasClass("show"))a.parent("li").removeClass("show"),c.parent("ul").hasClass(b.classes.container)&&h.find(".show").removeClass("show");else if(0<a.parent("li").children("ul").length)return a.parent("li").addClass("show"),!1}}),e.on("click",function(){if(!b.clickable()){var a=$(this),c=a.parent("li");return c.hasClass("show")?c.removeClass("show"):(h.find(".show").removeClass("show").removeClass("current"),c.addClass("show")),!1}}),f.on("click",function(){a&&"afterClick"in a&&"function"==typeof a.afterClick&&a.afterClick(b,this)}),g.on("click",function(){if($(b.container).find("."+b.classes.hamburger).toggleClass("show"),"sidebar"!==b.settings.layout)"collapse"===b.settings.layout&&c.find("."+b.classes.collapse).toggleClass("show");else if(c.find("."+b.classes.sidebar).toggleClass("show"),c.find("."+b.classes.overlay).toggleClass("show"),!c.hasClass("vg-sidebar-open")){var a=window.innerWidth-document.documentElement.clientWidth;c.addClass("vg-sidebar-open").css("padding-right",a)}else c.removeClass("vg-sidebar-open").css("padding-right",0);return!1}),b.settings.hover&&f.hover(function(){a&&"afterHover"in a&&"function"==typeof a.afterHover&&a.afterHover(b,this)}),b.dispose()}dispose(){var a=this,b=$("body"),c=$(document),d=$(a.container).children("ul");c.on("click","."+a.classes.overlay+", [data-dismiss=vg-nav-sidebar]",function(){return b.find("."+a.classes.hamburger).removeClass("show"),"sidebar"===a.settings.layout?(b.find("."+a.classes.sidebar).removeClass("show"),b.find("."+a.classes.overlay).removeClass("show"),b.hasClass("vg-sidebar-open")&&b.removeClass("vg-sidebar-open").css("padding-right",0)):"collapse"===a.settings.layout&&b.find("."+a.classes.collapse).removeClass("show"),!1}),c.mouseup(function(b){var c=$("."+a.classes.container);0===c.has(b.target).length&&d.find(".show").removeClass("show").removeClass("current")})}cloneNavigation(a,b){var c=b.clone().addClass(this.classes.cloned);a.append(c)}setWidthToSidebar(a,b){var c=$("."+this.classes.sidebar);// xl
a>=this.breakpoints.min.xl&&b.xl&&c.css("width",b.xl).css("right","-"+b.xl),a<this.breakpoints.min.xl&&a>=this.breakpoints.min.lg&&b.lg&&c.css("width",b.lg).css("right","-"+b.lg),a<this.breakpoints.min.lg&&a>=this.breakpoints.min.md&&b.md&&c.css("width",b.md).css("right","-"+b.md),a<this.breakpoints.min.md&&a>=this.breakpoints.min.sm&&b.sm&&c.css("width",b.sm).css("right","-"+b.sm),a<this.breakpoints.min.sm&&b.xs&&c.css("width",b.xs).css("right","-"+b.xs)}clickable(){return!!$(this.container).hasClass(this.classes.hover)&&this.checkResponsiveClass()}checkResponsiveClass(){return this.current_responsive_size=$(this.container).hasClass(this.classes.XL)?this.breakpoints.max.xl:$(this.container).hasClass(this.classes.LG)?this.breakpoints.max.lg:$(this.container).hasClass(this.classes.MD)?this.breakpoints.max.md:$(this.container).hasClass(this.classes.SM)?this.breakpoints.max.sm:$(this.container).hasClass(this.classes.XS)?this.breakpoints.max.xs:this.breakpoints.max.xs,window.innerWidth>=this.current_responsive_size}}
